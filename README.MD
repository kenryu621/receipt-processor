# Receipt Processor

This repository is for Fetch Backend Challenge, finished by Yifan Yu

## Running with Docker

1. Clone the repository:

   ```bash
   git clone https://github.com/kenryu621/receipt-processor.git
   cd receipt-processor
   ```

2. Build the Docker Image:

   ```bash
   docker built -t receipt-processor .
   ```
   

3. Run the container:

   ```bash
   docker run -p 8087:8087 receipt-processor
   ```

The webservice will be running on `http://localhost:8087`

## Testing the Endpoints

You can use `curl` to test the endpoints.

__Process a receipt__:

```bash
curl -X POST -H "Content-Type: application/json" -d @sample_receipt.json http://localhost:8087/receipts/process
```

__Get points__:

```bash
curl http://localhost:8087/receipts/{id}/points
```

Replace `{id}` with the UUID returned from processing the receipt.

__Example receipts__:

```json
{
  "retailer": "Target",
  "purchaseDate": "2022-01-01",
  "purchaseTime": "13:01",
  "items": [
    {
      "shortDescription": "Mountain Dew 12PK",
      "price": "6.49"
    },{
      "shortDescription": "Emils Cheese Pizza",
      "price": "12.25"
    },{
      "shortDescription": "Knorr Creamy Chicken",
      "price": "1.26"
    },{
      "shortDescription": "Doritos Nacho Cheese",
      "price": "3.35"
    },{
      "shortDescription": "   Klarbrunn 12-PK 12 FL OZ  ",
      "price": "12.00"
    }
  ],
  "total": "35.35"
}
```

```json
{
  "retailer": "M&M Corner Market",
  "purchaseDate": "2022-03-20",
  "purchaseTime": "14:33",
  "items": [
    {
      "shortDescription": "Gatorade",
      "price": "2.25"
    },{
      "shortDescription": "Gatorade",
      "price": "2.25"
    },{
      "shortDescription": "Gatorade",
      "price": "2.25"
    },{
      "shortDescription": "Gatorade",
      "price": "2.25"
    }
  ],
  "total": "9.00"
}
```

## Summary

This is a webservice based on Go, a receipt processor for processing receipt to calculate points. The processed receipts are stored in the RAM and provided two endpoints.

### Endpoint: Process Receipt

- **Path**: `/receipts/process`
- **Method**: `POST`
- **Payload**: `Receipt JSON`
- **Response**: JSON containing an id for the receipt.

**Description**:

Takes in a JSON receipt and returns a JSON object with an UUID generated by code. The ID returned can be passed into `receipts/{id}/points` to get the number of points the receipt earned.

### Endpoint: Get Points

- **Path**: `/receipts/{id}/points`
- **Method**: `GET`
- **Response**: A JSON object containing the numb er of points awarded.

A simple Getter endpoint that looks up the receipt by the ID and returns an object specifying the points awarded.

